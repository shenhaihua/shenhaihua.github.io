---
layout: post
title:  "使用gulp构建项目(demo)"
date:   2016-05-15
excerpt: "之前没有用过构建工具，第一次使用，写了个demo,记录下。"
tag:
- gulp
- linux
- demo
comments: true
---

之前没有用过构建工具，第一次使用，写了个demo [项目地址](https://github.com/shenhaihua/gulp_demo)

### demo目录结构

```js
+ gulp_demo (项目文件夹)
  + node_modules (gulp组件目录)
  + dist (发布环境)
  + src (开发环境)
    + css
      - *.css
      - *.less
    + js
    + images
    + fonts
  - html
  - gulpfile.js (gulp任务文件)
  - package.json
  - README.md
```

使用命令创建目录

    $ mkdir -vp dist src/{css,js,images,fonts}

### linux下启动gulp报错

用gulp启动，错误如下：

```
　　Error： watch ENOSPC

　　at exports._errnoException （util.js:746:11）

　　at FSWatcher.start （fs.js:1172:11）

　　at Object.fs.watch （fs.js:1198:11）

　　at Gaze._watchDir （/home/ajaxGu/work/froad/anhui-standard/personal-h5/node_modules/gulp/node_modules/vinyl-fs/node_modules/glob-watcher/node_modules/gaze/lib/gaze.js:289:30）

　　at /home/ajaxGu/work/froad/anhui-standard/personal-h5/node_modules/gulp/node_modules/vinyl-fs/node_modules/glob-watcher/node_modules/gaze/lib/gaze.js:358:10

　　at iterate （/home/ajaxGu/work/froad/anhui-standard/personal-h5/node_modules/gulp/node_modules/vinyl-fs/node_modules/glob-watcher/node_modules/gaze/lib/helper.js:52:5）

　　at Object.forEachSeries （/home/ajaxGu/work/froad/anhui-standard/personal-h5/node_modules/gulp/node_modules/vinyl-fs/node_modules/glob-watcher/node_modules/gaze/lib/helper.js:66:3）

　　at Gaze._initWatched （/home/ajaxGu/work/froad/anhui-standard/personal-h5/node_modules/gulp/node_modules/vinyl-fs/node_modules/glob-watcher/node_modules/gaze/lib/gaze.js:354:10）

　　at Gaze.add （/home/ajaxGu/work/froad/anhui-standard/personal-h5/node_modules/gulp/node_modules/vinyl-fs/node_modules/glob-watcher/node_modules/gaze/lib/gaze.js:177:8）

　　at new Gaze （/home/ajaxGu/work/froad/anhui-standard/personal-h5/node_modules/gulp/node_modules/vinyl-fs/node_modules/glob-watcher/node_modules/gaze/lib/gaze.js:74:10）
```
　　解决方案：

　　当前问题主要是因为gulp的watch需要监听很多文件的改动，但是fedora、ubuntu系统的文件句柄其实是有限制的，因此可以使用以下命令：
```
　　echo fs.inotify.max_user_watches=524288 | sudo tee -a /etc/sysctl.conf && sudo sysctl -p
```
　　对于以上Linux下gulp报错Error：watch ENOSPC的解决方法就介绍完了，如果用户也出现以上同样问题，那么可以按照操作方法赶紧试试解决吧！
